parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"UwUq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbToHex=r,exports.hex=t,exports.setCurrentColor=l,exports.setActiveTool=c,exports.prevColor=exports.currentColor=void 0;var e=document.getElementById("current-color");exports.currentColor=e;var o=document.querySelector(".prevColor");function r(e,o,r){if(e>255||o>255||r>255)throw new Error("Invalid color component");return(e<<16|o<<8|r).toString(16)}function t(e){var o=e.split(",");return"#"+("000000"+r(Number(o[0].substring(4)),Number(o[1]),Number(o[2].slice(1,-1)))).slice(-6)}function l(r){o.style.backgroundColor=e.value,e.value=r}function c(e){document.getElementById("tools").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-tool",!1)}),document.querySelector(".".concat(e)).classList.toggle("active-tool"),"picker"===e?document.getElementById("colors").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-colors",!0)}):document.getElementById("colors").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-colors",!1)})}exports.prevColor=o;
},{}],"c4sH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Canvas=void 0;var e=require("./colors");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var r=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;t(this,i),this.cellSize=e,this.canvas=document.getElementById("canvas"),this.numberOfLevels=this.canvas.width/this.cellSize,this.ctx=this.canvas.getContext("2d")}return n(i,[{key:"createMap",value:function(){for(var e=this.canvas.width,t=new Array(this.numberOfLevels),i=0;i<t.length;i+=1)t[i]=new Array(this.numberOfLevels);for(var n=0;n<t.length;n+=1)for(var r=0;r<t.length;r+=1)t[n][r]={};for(var l=0;l<e;l+=this.cellSize)for(var a=0;a<e;a+=this.cellSize)t[l/this.cellSize][a/this.cellSize].x=a,t[l/this.cellSize][a/this.cellSize].y=l;return t}},{key:"defaultFill",value:function(){this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(0,0,this.canvas.height,this.canvas.width)}},{key:"findCanvasSector",value:function(e,t,i){for(var n,r,l=0;l<1;l+=1)for(var a=0;a<this.numberOfLevels;a+=1){if(t>512)return;void 0===e[l][a+1]&&t>e[l][a].x?n=a:t>e[l][a].x&&t<e[l][a+1].x&&(n=a)}for(var s=0;s<this.numberOfLevels;s+=1)for(var c=n;c<n+1;c+=1){if(i>512)return;void 0===e[s+1]&&i>e[s][c].y?r=s:i>e[s][c].y&&i<e[s+1][c].y&&(r=s)}return[r,n]}},{key:"fillSector",value:function(e,t,i){this.ctx.fillStyle=i,this.ctx.fillRect(e,t,this.cellSize,this.cellSize)}},{key:"colorOfCanvasPixel",value:function(t,i){var n=this.ctx.getImageData(t,i,1,1).data;return"#"+("000000"+(0,e.rgbToHex)(n[0],n[1],n[2])).slice(-6)}},{key:"getMousePos",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}}]),i}();exports.Canvas=r;
},{"./colors":"UwUq"}],"KIzB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"currentColor",{enumerable:!0,get:function(){return t.currentColor}}),Object.defineProperty(exports,"prevColor",{enumerable:!0,get:function(){return t.prevColor}});var e=require("./canvas"),t=require("./colors");function o(e,t){return c(e)||n(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var o=[],r=!0,n=!1,c=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done)&&(o.push(l.value),!t||o.length!==t);r=!0);}catch(s){n=!0,c=s}finally{try{r||null==a.return||a.return()}finally{if(n)throw c}}return o}}function c(e){if(Array.isArray(e))return e}var l=new e.Canvas;l.defaultFill();var a,s=l.createMap(),u=!1;window.addEventListener("DOMContentLoaded",function(){a=localStorage.tool||"pencil",(0,t.setActiveTool)(a),t.currentColor.value=localStorage.currColor||"#008000",t.prevColor.style.backgroundColor=localStorage.preColor||"#808080";var e=localStorage.getItem("canvasImg"),o=new Image;o.src=e,o.onload=function(){l.ctx.drawImage(o,0,0)}}),window.addEventListener("beforeunload",function(){localStorage.setItem("tool",a),localStorage.setItem("currColor",t.currentColor.value),localStorage.setItem("preColor",(0,t.hex)(t.prevColor.style.backgroundColor)),localStorage.setItem("canvasImg",l.canvas.toDataURL())}),document.getElementById("tools").addEventListener("click",function(e){document.getElementById("tools").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-tool",!1)}),e.target.classList.toggle("active-tool");var t=o(e.target.classList,2)[1];"picker"===(a=t)?document.getElementById("colors").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-colors",!0)}):document.getElementById("colors").querySelectorAll("p").forEach(function(e){return e.classList.toggle("active-colors",!1)})}),document.getElementById("canvas").addEventListener("mousedown",function(e){var o=l.getMousePos(e),r=l.findCanvasSector(s,o.x,o.y);switch(a){case"bucket":l.fillSector(s[r[0]][r[1]].x,s[r[0]][r[1]].y,t.currentColor.value);break;case"picker":(0,t.setCurrentColor)(l.colorOfCanvasPixel(o.x,o.y));break;case"pencil":l.ctx.beginPath(),l.ctx.moveTo(o.x,o.y),u=!0,document.getElementById("canvas").addEventListener("mousemove",function(e){if(u){var o=l.getMousePos(e);l.ctx.strokeStyle=t.currentColor.value,l.ctx.lineTo(o.x,o.y),l.ctx.stroke()}}),document.getElementById("canvas").addEventListener("mouseup",function(){u&&(l.ctx.closePath(),u=!1)})}}),document.getElementById("colors").addEventListener("click",function(e){if("picker"===a)switch("current-color"===e.target.id&&(t.prevColor.style.backgroundColor=t.currentColor.value),e.target.classList[1]){case"second":(0,t.setCurrentColor)((0,t.hex)(t.prevColor.style.backgroundColor));break;case"third":(0,t.setCurrentColor)("#CD0000");break;case"fourth":(0,t.setCurrentColor)("#0000ff")}else"picker"!==a&&"current-color"===e.target.id&&e.preventDefault()}),document.addEventListener("keydown",function(e){switch(e.keyCode){case 66:a="bucket",(0,t.setActiveTool)(a);break;case 67:a="picker",(0,t.setActiveTool)(a);break;case 80:a="pencil",(0,t.setActiveTool)(a)}});
},{"./canvas":"c4sH","./colors":"UwUq"}]},{},["KIzB"], null)
//# sourceMappingURL=main.95765c56.js.map